(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[322],{6066:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/poem",function(){return n(4822)}])},1328:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(1527),i=n(1787),_=n.n(i),s=n(7009),o=n.n(s),a=n(5924),l=n(959);let c=(0,l.memo)(function(e){let{text:t,link:n,active:i}=e;return(0,r.jsxs)("div",{className:(0,a.Z)({[o().button_wrapper]:!0}),open:i,children:[(0,r.jsx)(_(),{className:o().text,href:n,children:t}),(0,r.jsx)("div",{className:o().bottom_line})]})});function m(e){let{name:t}=e;return(0,r.jsxs)("div",{className:"".concat(o().headerContainer),children:[(0,r.jsxs)("div",{className:(0,a.Z)({[o().leftPanel]:!0}),children:[(0,r.jsx)("div",{className:"text-white",children:"LOGO"}),(0,r.jsx)(c,{text:"首页",link:"/",active:"home"==t}),(0,r.jsx)(c,{text:"文艺",link:"/poem",active:"poem"==t}),(0,r.jsx)(c,{text:"关于我",link:"/me",active:"me"==t})]}),(0,r.jsx)("div",{className:o().rightPanel,children:(0,r.jsx)("div",{className:o().icon,children:"W"})})]})}},6979:function(e,t,n){"use strict";var r=n(959);let i=()=>{let[e,t]=(0,r.useState)(0);return(0,r.useEffect)(()=>{let e=()=>{t(window.scrollY)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),e};t.Z=i},4822:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return b},default:function(){return x}});var r=n(1527),i=n(959),_=n(4222),s=n(1965),o=n(1328),a=n(8568),l=n.n(a);function c(e){let{children:t,forwardRef:n}=e;return(0,r.jsx)("aside",{className:l().side_menu_wrapper,ref:n,children:t})}function m(e){let{children:t,chapter:n,href:_="",active:s}=e,[o,a]=(0,i.useState)(!1),c=(0,i.useRef)(null),m=(0,i.useRef)(null),d=()=>{let e=c.current;if(e){if(o)e.style.overflow="hidden",e.style.height="".concat(e.offsetHeight,"px"),e.offsetHeight,e.style.height="0px",m.current=setTimeout(()=>{e.style.overflow="auto",e.style.display="none"},500);else{e.style.display="block",e.style.overflow="hidden",e.style.height="auto";let t=e.offsetHeight;e.style.height="0px",e.offsetHeight,e.style.height="".concat(t,"px"),m.current=setTimeout(()=>{e.style.overflow="auto",e.style.height="auto"},200)}}};return(0,r.jsxs)("li",{className:"".concat(l().sub_side_menu_wrapper),children:[(0,r.jsxs)("a",{className:"".concat(l().sub_menu_chapter," ").concat(s?"active":""),open:o,onClick:()=>{a(e=>!e),d()},children:[n,(0,r.jsx)("span",{className:l().sub_menu_item_icon})]}),(0,r.jsx)("ul",{className:"".concat(l().sub_side_menu_items),ref:c,children:t})]})}function d(e){let{children:t,href:n="",className:i=""}=e;return(0,r.jsx)("li",{className:"".concat(l().side_menu_item_wrapper," ").concat(i),children:(0,r.jsx)("a",{href:n,children:t})})}var u=n(6979),p=n(2644),h=n.n(p);let f=e=>{let{title:t,content:n,id:i}=e;return(0,r.jsxs)("section",{className:h().poemContainer,id:i,children:[(0,r.jsx)("div",{className:h().poemTitleWrapper,children:(0,r.jsx)("div",{className:h().poemTitle,children:t})}),(0,r.jsx)("div",{className:h().poemContentWrapper,children:(0,r.jsx)("div",{className:h().poemContent,dangerouslySetInnerHTML:{__html:n}})})]})};var b=!0;function x(e){let{allPostsData:t}=e,n=(0,u.Z)(),a=function(e,t){if(null===e)return{};let n={};for(let r of e){let e=r[t];n.hasOwnProperty(String(e))||(n[String(e)]=[]),n[String(e)].push(r)}return n}(t,"year"),l=(0,i.useMemo)(()=>{let e={};return Object.keys(a).forEach(t=>{e[String(t)]=a[t].map(e=>({year:e.year,id:e.id,title:e.title}))}),e},[a]),[p,b]=(0,i.useState)(Object.values(l)[0][0].id),{run:x}=(0,_.Z)(()=>{let e=[];if(document.documentElement.clientHeight+window.scrollY===document.body.scrollHeight){let e=Object.values(l),t=e[e.length-1][e[e.length-1].length-1].id;b(t)}else if(Object.keys(l).forEach(t=>{l[t].forEach(t=>{let n=document.getElementById(t.id);n&&n.getBoundingClientRect().top>0&&e.push({id:t.id,top:Math.abs(n.getBoundingClientRect().top-96)})})}),e.length){e.sort((e,t)=>e.top-t.top);let{id:t}=e[0];b(t)}},{wait:150}),g=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=g.current,t=e=>{e.preventDefault();let t=e.target.getAttribute("href");if(t){let e=document.getElementById(t.slice(1));e&&e.scrollIntoView(),b(t.slice(1))}};return e&&e.addEventListener("click",t),window&&window.addEventListener("scroll",x),()=>{e&&e.removeEventListener("click",t),window&&window.removeEventListener("scroll",x)}},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.PB,{title:"诗意"}),(0,r.jsx)("section",{className:"header-fixed ".concat(n?"sticky":""),children:(0,r.jsx)(o.Z,{name:"poem"})}),(0,r.jsx)("main",{className:h().main,children:(0,r.jsxs)("section",{className:"flex justify-between",children:[(0,r.jsx)("section",{className:h().poems,children:t.map(e=>(0,r.jsx)(f,{id:e.id,title:e.title,content:e.content},e.id))}),(0,r.jsx)("div",{className:h().side_bar,children:(0,r.jsx)(c,{forwardRef:g,children:Object.keys(l).map(e=>(0,r.jsx)(m,{chapter:e,active:p.slice(0,4)==e,children:l[e].map(t=>(0,r.jsx)(d,{href:"#".concat(t.id),className:"".concat(p===t.id?"active":""),children:t.title},"".concat(e,"-poem-").concat(t.id)))},"poem-submenu-".concat(e)))})})]})})]})}},7009:function(e){e.exports={headerContainer:"Header_headerContainer__m5wGA",leftPanel:"Header_leftPanel__ob0aF",list:"Header_list___02Jq",button_wrapper:"Header_button_wrapper__iJH_a",text:"Header_text__YE7s8",bottom_line:"Header_bottom_line__360El",active:"Header_active__gnzlZ",bottomLine:"Header_bottomLine__zUzkC",rightPanel:"Header_rightPanel__rARBv",icon:"Header_icon__z9DUe"}},2644:function(e){e.exports={side_bar:"Home_side_bar__pNvft",poems:"Home_poems__RFdIL",poemContainer:"Home_poemContainer__BMyY5",poemTitleWrapper:"Home_poemTitleWrapper__a8qqp",poemTitle:"Home_poemTitle__TyoM3",poemContentWrapper:"Home_poemContentWrapper__oYeHN",poemContent:"Home_poemContent__i3PJ9",main:"Home_main__OVLM4",banner_container:"Home_banner_container__dXTOj",banner:"Home_banner__F5GOV",banner_wrapper:"Home_banner_wrapper__GP2Du",banner_img_container:"Home_banner_img_container___zIM6",banner_img_background:"Home_banner_img_background__PLabl","slide-x-out":"Home_slide-x-out__4jWOS","slide-x-in":"Home_slide-x-in__EwtjN","slide-x-out-reverse":"Home_slide-x-out-reverse__e_zYB","slide-x-in-reverse":"Home_slide-x-in-reverse__bz9HL",banner_button_group:"Home_banner_button_group__cR4A_",active:"Home_active__jsr0T",banner_text_container:"Home_banner_text_container__3jsbr",banner_text_header:"Home_banner_text_header__2hKTI",banner_text_content:"Home_banner_text_content__cWNFF",banner_time_progress:"Home_banner_time_progress___3XrX",banner_time_progress_inner:"Home_banner_time_progress_inner__7jdR3","time-progress":"Home_time-progress__g0rnf"}},8568:function(e){e.exports={side_menu_wrapper:"SideMenu_side_menu_wrapper__ejp7D",sub_side_menu_wrapper:"SideMenu_sub_side_menu_wrapper__E7jAn",sub_menu_chapter:"SideMenu_sub_menu_chapter___nKVr",sub_menu_item_icon:"SideMenu_sub_menu_item_icon__lx2AY",side_menu_item_wrapper:"SideMenu_side_menu_item_wrapper__PXmss",sub_side_menu_items:"SideMenu_sub_side_menu_items__p5C0o"}}},function(e){e.O(0,[787,834,774,888,179],function(){return e(e.s=6066)}),_N_E=e.O()}]);